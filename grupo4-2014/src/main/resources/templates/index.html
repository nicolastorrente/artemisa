<!DOCTYPE html>
<html>
	<head th:substituteby="header :: copy">
	<style type='text/css'>
	</style>
	</head>
	<body onload="loadFriends(true);return false;userform();">
		<div id='content' class='row'>
	      <div class='col-md-3'>
	        <div class="panel panel-default">
			  <div class="panel-heading">
			    <h1 class="panel-title">Usuarios</h1>
			  </div>
			  <div class="panel-body" style="min-height:400px">
			  	<ul id="listUsers" class="list-group"/>
        		<script id="rowTemplateUsers" type="text/html">
        	    	<a href="#userLists" class="list-group-item">{{USER}}</a>
        		</script>
        		<script id="rowTemplateUsersActive" type="text/html">
        	    	<a href="#userLists" class="list-group-item active">{{USER}}</a>
        		</script>
        		<div id="Content"></div>
			  </div>
		  	</div>
	      </div>
	      <div class='col-md-5'>
	        <div class="panel panel-default">
			  <div class="panel-heading">
			    <h1 id="labelPanelLists" class="panel-title">Listas del usuario...</h1>
			  </div>
			  <div class="panel-body" style="min-height:400px">
				<ul id="listOfList" class="list-group"/>
        		<script id="rowTemplateLists" type="text/html">
        	    	<a href="#itemsList" class="list-group-item">{{LIST}}</a>
        		</script>
        		<script id="rowTemplateListsActive" type="text/html">
        	    	<a href="#itemsList" class="list-group-item active">{{LIST}}</a>
        		</script>
			  </div>
		  	</div>
	      </div>
	      <div class='col-md-4'>
	        <div class="panel panel-default">
			  <div class="panel-heading">
			    <h1 id="labelPanelItems" class="panel-title">Item de la lista...</h1>
			  </div>
			  <div class="panel-body" style="min-height:400px">
			    <ul id="listOfItems" class="list-group"/>
        		<script id="rowTemplateItems" type="text/html">
       	    		<a href="#incItem" class="list-group-item"><span class="badge">{{VOTES}}</span>{{ITEM}}</a>
        		</script>
			  </div>
		  	</div>
	      </div>
		</div>
	    <div th:substituteby="footer :: copy"></div>
	    
	    <!--nico: esto lo voy a poner en el archivo js apropiado pero quiero probar algo antes-->
	    <script>
	    	$(function userform() {
				 $('#Content').after('Nuevo Usuario: <input name="username" id="username" type="text" maxlength="10" /><button id="AgregarUsuario">Ok</button>');
			});
			$(function () {
				  $('#AgregarUsuario').on('click', function () {
					  $('#Content').before($('#username').val() + '<br/>');
					  var userjson = {}; //poner user posta
					  userjson['id'] = 777;
					  userjson['username'] = $('#username').val();
					  userjson['lists'] = [];
					  $.ajax({
						    url : "/users",
						    type: "POST",
						    data : JSON.stringify(userjson),
						    contentType: 'application/json',
						    success: function(data, textStatus, jqXHR)
						    {
						    	alert('Usuario "' + $('#username').val() + '" creado.');
						        //data - respuesta del server
						    },
						    error: function (jqXHR, textStatus, errorThrown)
						    {
						    	alert('Error. cuando se solucione el problema de los POST esto va a andar');
						    }
						});
				  });
			});
		</script>
		<!--nico: esto lo voy a poner en el archivo js apropiado pero quiero probar algo antes-->
	</body>
	<script src="/resources/js/jquery-2.1.0.min.js"></script>
	<script src="/resources/js/application.js"></script>
	<script src="/resources/js/services.js"></script>
</html>
