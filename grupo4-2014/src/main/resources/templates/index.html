<!DOCTYPE html>
<html>
	<head th:substituteby="header :: copy">
	<style type='text/css'>
	</style>
	</head>
	<body onload="cargaamigos();return false;">
		<div id='content' class='row'>
	      <div class='col-md-3'>
	        <div class="panel panel-default">
			  <div class="panel-heading">
			    <h1 class="panel-title">Usuarios</h1>
			    
			  </div>
			  <div class="panel-body" style="min-height:400px">
			    <table>
           			<thead>
                		<tr>
                	    	<th width="40%">ID</th>
                    		<th width="40%">Name</th>
                		</tr>
            		</thead>
            		<tbody  class='tbody-users'>
            		</tbody>
        		</table>
        		<script id="rowTemplate" type="text/html">
        	    	<tr>
        	    	    <td width="40%">
        	    	        {{ID}}
        	    	    </td>
        	    	    <td width="40%">
        	    	        {{Name}}
        	    	    </td>
        	    	    <td>
        	    	        <button onclick="cargalistas();return false;">ver listas</button>
        	    	    </td>
        	    	</tr>
        		</script>
			  </div>
		  	</div>
	      </div>
	      <div class='col-md-5'>
	        <div class="panel panel-default">
			  <div class="panel-heading">
			    <h1 class="panel-title">Listas del Usuario...</h1>
			  </div>
			  <div class="panel-body-2" style="min-height:400px">
			    <table>
           			<thead>
                		<tr>
                	    	<th width="40%">Lista ID</th>
                    		<th width="40%">Lista Name</th>
                		</tr>
            		</thead>
            		<tbody class='tbody-lists'>
            		</tbody>
        		</table>
        		<script id="rowTemplateLists" type="text/html">
        	    	<tr>
        	    	    <td width="40%">
        	    	        {{ListaID}}
        	    	    </td>
        	    	    <td width="40%">
        	    	        {{ListaName}}
        	    	    </td>
        	    	    <td>
        	    	        <button onclick="cargaitems()">ver items</button>
        	    	    </td>
        	    	</tr>
        		</script>
			  </div>
		  	</div>
	      </div>
	      <div class='col-md-4'>
	        <div class="panel panel-default">
			  <div class="panel-heading">
			    <h1 class="panel-title">Item de la lista...</h1>
			  </div>
			  <div class="panel-body" style="min-height:400px">
			     <table>
           			<thead>
                		<tr>
                	    	<th width="40%">Item ID</th>
                    		<th width="40%">Item Label</th>
                		</tr>
            		</thead>
            		<tbody class='tbody-items'>
            		</tbody>
        		</table>
        		<script id="rowTemplateItems" type="text/html">
        	    	<tr>
        	    	    <td width="40%">
        	    	        {{ItemID}}
        	    	    </td>
        	    	    <td width="40%">
        	    	        {{ItemLabel}}
        	    	    </td>
        	    	    <td>
        	    	        <button onclick="">Me gusta!</button>
        	    	    </td>
        	    	</tr>
        		</script>
			  </div>
		  	</div>
	      </div>
		</div>
	    <div th:substituteby="footer :: copy"></div>
	    <script>
	    	function cargaamigos() {
  				$.ajax({
    			    type: "GET",
        			url: "/users",
        			success: function(ajaxresult){
        				for(var k in ajaxresult) {
 							var row = $("#rowTemplate").html().replace("{{ID}}", ajaxresult[k].id).replace("{{Name}}", ajaxresult[k].username)
    						$(".tbody-users").append(row)
						}
					}
				});
			}
			function cargalistas() {
  				$.ajax({
    			    type: "GET",
        			url: "/lists",
        			success: function(ajaxresult){
        				for(var k in ajaxresult) {
 							var row = $("#rowTemplateLists").html().replace("{{ListaID}}", ajaxresult[k].id).replace("{{ListaName}}", ajaxresult[k].name)
    						$(".tbody-lists").append(row)
        				
						}
					}
				});
			}
			function cargaitems() {
  				$.ajax({
    			    type: "GET",
        			url: "lists/12341/items",
        			success: function(ajaxresult){
        				for(var k in ajaxresult) {
        					var row = $("#rowTemplateItems").html().replace("{{ItemID}}", ajaxresult[k].id).replace("{{ItemLabel}}", ajaxresult[k].label)
 							$(".tbody-items").append(row)
 						}
					}
				});
			}
		</script>
	    <script src="Scripts/jquery-2.1.0.min.js"></script>
	</body>
</html>
